<!-- categorization variables -->
{% include categorization.html %}

{% assign politicians = site.data.agents.politicians %}
{% assign parties = site.data.parties %}

<!-- categorization counters -->
{% include categorization_counters.html %}

<div class="border my-3 p-3 bg-body rounded shadow-sm">
    <h6 class="border-bottom pb-2">{{ site.data.locales.ui-text[site.lang].track_info_label | default: "Data and info about" }} {{ track_data.context.name }}</h6>
    <div class="row pt-2">
        <!-- % assign not_achieved = promises | where_exp: "item", "item.status contains 'Broken' or item.status contains 'Not started' or item.status contains 'In progress'" % 
                % assign not_achieved_percent = not_achieved | times: 100 | divided_by: total % -->
        <p>
            <b>Desde </b>  {{ track_data.context.from }} <b>hasta</b> {% if track_data.context.to %} {{ track_data.context.to }} {% else %} la actualidad {% endif %} 
        </p>
    </div>
</div>

<div class="border my-3 p-3 bg-body rounded shadow-sm"> 
    <h6 class="border-bottom pb-2 d-flex justify-content-between align-items-start">
        <span class="align-self-center">
            {{ site.data.locales.ui-text[site.lang].track_statements_label | default: "Tracking statements" }}
        </span>
        <a class="btn btn-sm btn-primary" href="{{page.url}}/register">
            <i class="fas fa-fw fa-plus"></i> {{ site.data.locales.ui-text[site.lang].add_statement_label | default: "Add new statement" }}
        </a>
    </h6>
    
    <div class="row pt-2">
        {% include listjs-categorization_filters.html %}
    </div>
    <div class="promises row pt-2" id="promises">
        {% include listjs-text_filter.html %}
        
        <div class="table-responsive-md promises__table">
            <table class="table">
                <thead> 
                <tr class="bg-dark text-light">
                    <th></th>
                    <th>{{ site.data.locales.ui-text[site.lang].category_label | default: "Category" }}</th>
                    <th>{{ site.data.locales.ui-text[site.lang].topic_label | default: "Statement" }}</th>
                    <th>{{ site.data.locales.ui-text[site.lang].type_label | default: "Type" }}</th>
                    <th></th>
                </tr>
                </thead>

                <tbody class="list">
                <!-- add color to each policy -->
                {% for item_data in items %}
                    {% assign item = item_data[1] %}
                    {% assign status = statuses | where: "name", item.status | first %}
                    {% assign category = categories | where: "name", item.category | first %}
                    {% assign party = parties | where: "name", item.party | first %}
                    
                    <tr class="list-group-item-{{ status.color }}">
                        <td>
                            {% include items_logo.html type='politician' %}                           
                        </td>
                        <td>
                            <span class="list-category">{{ item.category }}</span>
                            <span><i class="text-muted fas fa-fw fa-{{ category.icon }} " title="{{ category.name }}"></i></span>
                        </td>
                        <td class="list-text">
                            <span><b>{{ item.title }}:</b></span>
                            <span>{{ item.description }}</span>
                        </td>
                        <td>
                            <span class="d-none sr-only list-status">{{ item.status }}</span>
                            <span>{{ site.data.locales.ui-text[site.lang].[status.lang_label] | default: status.name }}</span>
                            <i class="fas fa-fw fa-{{ status.icon }} text-{{ status.color }}" title="{{ site.data.locales.ui-text[site.lang].[status.lang_label] | default: status.name }}"></i>
                        </td>
                        <td class="text-center">
                            {% assign text = item.politician %}
                            {% include normalize_text.html %}
                            {% assign politician = text %}
                            {% assign text = item.title %}
                            {% include normalize_text.html %}
                            <a class="btn btn-primary" href="{{ page.dir }}{{ politician | slugify | append: '_' }}{{ text | slugify }}">
                                <span class="d-inline-block align-middle"><i class="fas fa-fw fa-angle-right"></i></span>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>  
    </div>
</div>   