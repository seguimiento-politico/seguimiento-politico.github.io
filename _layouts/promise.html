---
layout: page
---

{% assign promise = site.data.promises.[page.track_name].[page.promise_name] %}
{% assign categorization = site.data.trackers.[page.track_name].context.categorization %}
{% assign status = site.data.categorization.[categorization].statuses | where:'name', promise.status | first %}

{{ content }}

<div class="callout callout-{{ status.color }} my-3 p-3 bg-body shadow-sm border-{{ status.color }}">
    <h6 class="border-bottom pb-2 mb-0"><b>{{ promise.title }}</b><small class="text-muted"> {{ promise.category }}</small></h6> 
    {% if promise.description %}
    <p class="lead">{{ promise.description }}</p>
    <br>
    {% endif %}
    <p>El estado de este compromiso es <span class="text-{{ status.color }} bold"> {{ site.data.ui-text[site.locale].[status.lang_label] }} <i class="fas fa-fw fa-{{ status.icon }} text-{{ status.color }}" title="{{ site.data.ui-text[site.locale].[status.lang_label] | default: status.name }}"></i> </span> debido a que {{ promise.status_info }}</p>
    <p class="text-end text-muted small mb-0"> Última revisión: {{promise.last_modified }}</p>
</div>

<div class="card my-3">
    <div class="card-header">Análisis</div>
    <div class="card-body">
        {% for part in promise.analysis %}
            {% assign statement_source = promise.sources | where:'ref', part.statement.source_ref %}
            <blockquote class="blockquote mb-2">
                {{forloop.index}}. {{ part.statement.quote }}
                <sup><a class="source_sup small" href="#ref{{ statement_source[0].ref }}" title="{{ statement_source[0].title }}">{{ statement_source[0].ref }}</a></sup>
                <footer class="blockquote-footer text-end">{{ part.statement.author }} en <cite>{{ statement_source[0].title }}</cite></footer>
            </blockquote>
            {% for fact in part.facts %}
                {% if fact.outcome == 'yes' %} 
                    {% assign icon = 'check' %}
                    {% assign color = 'success' %}
                    {% assign outcome = 'in favor' %}
                {% elsif fact.outcome == 'no' %} 
                    {% assign icon = 'times' %}
                    {% assign color = 'danger' %}
                    {% assign outcome = 'in opposition' %}
                {% elsif fact.outcome == 'maybe' %}    
                    {% assign icon = 'minus' %}
                    {% assign color = 'warning' %}
                    {% assign outcome = 'plausible' %}
                {% else %}
                    {% assign icon = 'question' %}
                    {% assign color = 'info' %}
                    {% assign outcome = 'irrelevant' %}
                {% endif %}
                <p class="card-text ms-3">
                    <i class="fas fa-fw fa-{{ icon }} text-{{ color }}"></i><span class="text-{{ color }}">{{ outcome }}</span>: {{ fact.reasoning }}
                </p>
                {% for fact_source in fact.sources %}
                    {% assign source = promise.sources | where:'ref', fact_source %}
                    <sup><a class="source_sup" href="#ref{{ source[0].ref }}" title="{{source[0].title}}">{{ source[0].ref }}</a></sup> 
                {% endfor %}
            {% endfor %}
        {% endfor %}
    </div>
</div>

<div class="card my-3">
    <div class="card-header">
        Fuentes y referencias
    </div>
    <div class="card-body">
        <h6 class="card-title">Encuentra aquí todas las fuentes informativas que se han empleado para registrar este compromiso/promesa y determinar el grado de cumplimiento actual.</h6>
        {% for source in promise.sources %}
        <p class="card-text small mb-0">
            {% if source.type == "local_doc" %}
                <a id="#ref{{source.ref}}" class="source_sup" target="_blank" href="{{site.url}}/asset.s/docs/{{ source.url }}">{{ source.ref }}. {{ source.title }}</a>
            {% else %}
                <a id="#ref{{source.ref}}" class="source_sup" target="_blank" href="{{ source.url }}">{{ source.ref }}. {{ source.title }}</a>
            {% endif %}
        </p>
        {% endfor %}
    </div>
</div>



    <div class="row">
        <a class='btn facebook' target="_blank" href="https://www.facebook.com/sharer.php?u={{site.baseurl}}/{{ promise.url }}/&title={{ promise.title }}"> <i class="fas fa-fw fa-facebook" aria-hidden="true"></i> Compartir</a>
        <a class="btn twitter" href="https://twitter.com/share?url={{site.baseurl}}/&text={{ promise.tweettext }}&hashtags=Seguimiento-politico" target="_blank"><i class="fas fa-fw fa-twitter" aria-hidden="true"></i> Tweet</a>
    </div>

